include .env
export

.EXPORT_ALL_VARIABLES:
DOCKER_BUILDKIT = 1

diff:
	cdk diff -c WP_ENV=$(WP_ENV) -c WP_HOME=$(WP_HOME) -c WP_SITEURL=$(WP_SITEURL) -c DB_USER=$(DB_USER) \
		-c AUTH_KEY=$(AUTH_KEY) -c SECURE_AUTH_KEY=$(SECURE_AUTH_KEY) -c LOGGED_IN_KEY=$(LOGGED_IN_KEY) \
		-c NONCE_KEY=$(NONCE_KEY) -c AUTH_SALT=$(AUTH_SALT) -c SECURE_AUTH_SALT=$(SECURE_AUTH_SALT) \
		-c LOGGED_IN_SALT=$(LOGGED_IN_SALT) -c NONCE_SALT=$(NONCE_SALT) -c READINESS_CHECK_PATH=$(READINESS_CHECK_PATH) \
		-c RUST_LOG=$(RUST_LOG) -c ROUTE53_HOSTEDZONE=$(ROUTE53_HOSTEDZONE) -c ROUTE53_SITENAME=$(ROUTE53_SITENAME) \
		-c WP_CACHE_KEY_SALT=$(WP_CACHE_KEY_SALT) -c DISABLE_OPCACHE_PRE_COMPILATION=$(DISABLE_OPCACHE_PRE_COMPILATION)
 
deploy:
	cdk deploy -c WP_ENV=$(WP_ENV) -c WP_HOME=$(WP_HOME) -c WP_SITEURL=$(WP_SITEURL) -c DB_USER=$(DB_USER) \
		-c AUTH_KEY=$(AUTH_KEY) -c SECURE_AUTH_KEY=$(SECURE_AUTH_KEY) -c LOGGED_IN_KEY=$(LOGGED_IN_KEY) \
		-c NONCE_KEY=$(NONCE_KEY) -c AUTH_SALT=$(AUTH_SALT) -c SECURE_AUTH_SALT=$(SECURE_AUTH_SALT) \
		-c LOGGED_IN_SALT=$(LOGGED_IN_SALT) -c NONCE_SALT=$(NONCE_SALT) -c READINESS_CHECK_PATH=$(READINESS_CHECK_PATH) \
		-c RUST_LOG=$(RUST_LOG) -c ROUTE53_HOSTEDZONE=$(ROUTE53_HOSTEDZONE) -c ROUTE53_SITENAME=$(ROUTE53_SITENAME) \
		-c WP_CACHE_KEY_SALT=$(WP_CACHE_KEY_SALT) -c DISABLE_OPCACHE_PRE_COMPILATION=$(DISABLE_OPCACHE_PRE_COMPILATION)
destroy:
	cdk destroy -c WP_ENV=$(WP_ENV) -c WP_HOME=$(WP_HOME) -c WP_SITEURL=$(WP_SITEURL) -c DB_USER=$(DB_USER) \
		-c AUTH_KEY=$(AUTH_KEY) -c SECURE_AUTH_KEY=$(SECURE_AUTH_KEY) -c LOGGED_IN_KEY=$(LOGGED_IN_KEY) \
		-c NONCE_KEY=$(NONCE_KEY) -c AUTH_SALT=$(AUTH_SALT) -c SECURE_AUTH_SALT=$(SECURE_AUTH_SALT) \
		-c LOGGED_IN_SALT=$(LOGGED_IN_SALT) -c NONCE_SALT=$(NONCE_SALT) -c READINESS_CHECK_PATH=$(READINESS_CHECK_PATH) \
		-c RUST_LOG=$(RUST_LOG) -c ROUTE53_HOSTEDZONE=$(ROUTE53_HOSTEDZONE) -c ROUTE53_SITENAME=$(ROUTE53_SITENAME) \
		-c WP_CACHE_KEY_SALT=$(WP_CACHE_KEY_SALT) -c DISABLE_OPCACHE_PRE_COMPILATION=$(DISABLE_OPCACHE_PRE_COMPILATION)